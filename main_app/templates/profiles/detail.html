{% extends 'base.html' %}
{% load static %}
{% block head %}
  <link rel="stylesheet" href="{% static 'css/profiles.css' %}">
{% endblock %}

{% block title %}My Profile{% endblock %}

{% block content %}
  <h1>{{ object.display_name }}</h1>
  <p><strong>Username:</strong> {{ object.user.username }}</p>
  <p><strong>Rank:</strong> {{ object.rank|default:"n/a" }}</p>
  <p><strong>Main Game:</strong> {{ object.main_game|default:"n/a" }}</p>
  <p><strong>Preferred Roles:</strong> {{ object.preferred_roles|default:"n/a" }}</p>

  {% if object.avatar %}
    <img src="{{ object.avatar.url }}" alt="Avatar" width="150">
  {% endif %}

  <h2>Linked Accounts</h2>
  <ul class="external-accounts">
    {% for acct in object.external_accounts.all %}
      <li>
        <strong>{{ acct.get_service_display }}:</strong>
        {% if acct.url %}
          <a href="{{ acct.url }}" target="_blank">{{ acct.identifier }}</a>
        {% else %}
          {{ acct.identifier }}
        {% endif %}
      </li>
    {% empty %}
      <li><em>No external accounts linked yet.</em></li>
    {% endfor %}
  </ul>

  <p><strong>Status:</strong> {{ object.get_status_display }}</p>

  <p>
    <a href="{% url 'profile-edit' %}" class="btn warn">Edit Profile</a>
    <a href="{% url 'profile-delete' %}" class="btn danger">Delete Profile</a>
  </p>
{% endblock %}