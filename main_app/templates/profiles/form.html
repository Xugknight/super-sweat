{% extends 'base.html' %}
{% load static %}
{% block head %}
  {{ block.super }}
  <link rel="stylesheet" href="{% static 'css/form.css' %}">
{% endblock %}

{% block content %}
  <div class="form-container">
    <form method="post" enctype="multipart/form-data">
      {% csrf_token %}
      <div class="form-group">
        {{ form.display_name.label_tag }}
        {{ form.display_name }}
      </div>
      <div class="form-group">
        {{ form.rank.label_tag }}
        {{ form.rank }}
      </div>
      <!-- etc. for each Profile fieldâ€¦ -->
      <h2>External Accounts</h2>
      {{ external_formset.management_form }}
      {% for subform in external_formset %}
        <div class="form-group">
          {{ subform.service.label_tag }}
          {{ subform.service }}
        </div>
        <div class="form-group">
          {{ subform.identifier.label_tag }}
          {{ subform.identifier }}
        </div>
        <div class="form-group">
          {{ subform.url.label_tag }}
          {{ subform.url }}
        </div>
        {% if subform.instance.pk %}
          <div class="form-group">
            {{ subform.DELETE }} <label for="{{ subform.DELETE.id_for_label }}">Delete</label>
          </div>
        {% endif %}
      {% endfor %}
      <div class="form-actions">
        <button type="submit" class="btn submit">Save Changes</button>
        <a href="{% url 'profile-detail' %}" class="btn secondary">Cancel</a>
      </div>
    </form>
  </div>
{% endblock %}
